<form method="post" action="{{ path('app_contact_post') }}" class="bg-white border border-neutral-200 p-8 rounded-2xl shadow-sm transition hover:shadow-md space-y-6">

    {% for field in fields %}
        <div class="form-control text-left">
            {% if field.type.value != 'checkbox' %}
                <label class="block mb-2 font-semibold text-neutral-700">
                    {{ field.label }}
                    {% if field.isRequired %}
                        <span class="text-error">*</span>
                    {% endif %}
                </label>
            {% endif %}

            {% if field.type.value == 'text' %}
                <input
                    type="text"
                    name="{{ field.name }}"
                    class="input w-full border border-neutral-300 focus:border-black focus:ring-0 rounded-md py-2 px-3 placeholder-neutral-400"
                    {% if field.isRequired %}required{% endif %}
                >

            {% elseif field.type.value == 'email' %}
                <input
                    type="email"
                    name="{{ field.name }}"
                    class="input w-full border border-neutral-300 focus:border-black focus:ring-0 rounded-md py-2 px-3 placeholder-neutral-400"
                    {% if field.isRequired %}required{% endif %}
                >

            {% elseif field.type.value == 'textarea' %}
                <textarea
                    name="{{ field.name }}"
                    class="textarea w-full border border-neutral-300 focus:border-black focus:ring-0 rounded-md py-2 px-3 placeholder-neutral-400 min-h-[120px]"
                    {% if field.isRequired %}required{% endif %}
                ></textarea>

            {% elseif field.type.value == 'select' %}
                <select
                    name="{{ field.name }}"
                    class="select w-full border border-neutral-300 focus:border-black focus:ring-0 rounded-md py-2 px-3 bg-white"
                    {% if field.isRequired %}required{% endif %}
                >
                    <option value="">-- Choisir --</option>
                    {% for option in field.options ?? [] %}
                        <option value="{{ option }}">{{ option }}</option>
                    {% endfor %}
                </select>

            {% elseif field.type.value == 'checkbox' %}
                <label class="flex items-center gap-3 cursor-pointer select-none">
                    <input
                        type="checkbox"
                        name="{{ field.name }}"
                        class="checkbox border-neutral-400 checked:bg-black checked:border-black"
                        value="1"
                        {% if field.isRequired %}required{% endif %}
                    />
                    <span class="text-neutral-700">{{ field.label }}</span>
                </label>
            {% endif %}
        </div>
    {% endfor %}

    <input type="hidden" name="_csrf_token" value="{{ csrf_token('contact_form') }}">

    <div style="display:none;">
        <label for="contact_hp">Ne pas remplir ce champ</label>
        <input type="text" id="contact_hp" name="contact_hp" autocomplete="off">
    </div>

    <div class="pt-4">
        <button type="submit" class="btn w-full bg-black text-white hover:bg-neutral-800 transition font-semibold py-3 rounded-md">
            {{ contact.button_label|default('Soumettre le formulaire') }}
        </button>
    </div>
</form>
