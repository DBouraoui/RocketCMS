{% extends './Themes/Business/base.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block body %}
    <div class="min-h-screen bg-white">
        <!-- Hero de l'article -->
        {% if post.coverPicture %}
            <div class="w-full h-[60vh] relative overflow-hidden bg-gray-100">
                <img src="{{ asset(post.coverPicture) }}"
                     alt="{{ post.title }}"
                     class="w-full h-full object-cover grayscale">
            </div>
        {% endif %}

        <!-- Contenu de l'article -->
        <div class="max-w-4xl mx-auto px-6">

            <!-- En-tête de l'article -->
            <div class="py-16 border-b border-gray-200">
                <div class="flex flex-wrap items-center gap-4 text-xs text-gray-500 mb-6 tracking-wide">
                    <span>Article publié le : {{ post.createdAt ? post.createdAt|date('d.m.Y') : '' }}</span>

                    {% if post.updatedAt and post.updatedAt != post.createdAt %}
                        <span class="text-gray-300">|</span>
                        <span>Modifié le {{ post.updatedAt|date('d.m.Y') }}</span>
                    {% endif %}

                    {% if post.viewCount is defined and post.viewCount %}
                        <span class="text-gray-300">|</span>
                        <span>{{ post.viewCount }} {{ post.viewCount > 1 ? 'vues' : 'vue' }}</span>
                    {% endif %}
                </div>

                <h1 class="text-5xl md:text-6xl font-light tracking-tight mb-6 leading-tight">
                    {{ post.title }}
                </h1>

                {% if post.subtitle %}
                    <p class="text-2xl text-gray-600 font-light leading-relaxed">
                        {{ post.subtitle }}
                    </p>
                {% endif %}

                {% if post.tags %}
                    <div class="flex flex-wrap gap-2 mt-6">
                        {% for tag in post.tags|split(',') %}
                            <span class="px-3 py-1 border border-gray-300 text-gray-700 text-xs font-medium tracking-wider uppercase hover:bg-black hover:text-white hover:border-black transition duration-300">
                                {{ tag|trim }}
                            </span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <!-- Corps de l'article -->
            <article class="py-16 prose prose-lg max-w-none">
                <div class="article-content">
                    {{ post.content|markdown_to_html|raw }}
                </div>
            </article>

            <!-- Pied de l'article -->
            <div class="py-16 border-t border-gray-200 space-y-12">

                <!-- Section partage -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 pb-12 border-b border-gray-100">
                    <div>
                        <h3 class="text-sm font-medium tracking-wider uppercase mb-2">Partager cet article</h3>
                        <div class="flex gap-4">
                            <a href="https://twitter.com/intent/tweet?url={{ app.request.uri }}&text={{ post.title|url_encode }}"
                               target="_blank"
                               class="w-10 h-10 border border-gray-300 flex items-center justify-center hover:bg-black hover:text-white hover:border-black transition duration-300">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                                </svg>
                            </a>
                            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ app.request.uri }}"
                               target="_blank"
                               class="w-10 h-10 border border-gray-300 flex items-center justify-center hover:bg-black hover:text-white hover:border-black transition duration-300">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                </svg>
                            </a>
                            <a href="https://www.facebook.com/sharer/sharer.php?u={{ app.request.uri }}"
                               target="_blank"
                               class="w-10 h-10 border border-gray-300 flex items-center justify-center hover:bg-black hover:text-white hover:border-black transition duration-300">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                </svg>
                            </a>
                        </div>
                    </div>

                    <a href="{{ path('app_blog_index') }}"
                       class="inline-flex items-center gap-2 text-sm hover:-translate-x-1 transition-transform duration-300">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/>
                        </svg>
                        Retour aux articles
                    </a>
                </div>
            </div>
        {% include 'Themes/Business/blog/_similaires.html.twig' with { similaires: similaires } %}
        </div>
    </div>

    <style>
        /* Styles pour le contenu markdown */
        .article-content {
            color: #374151;
            line-height: 1.8;
        }

        .article-content h1,
        .article-content h2,
        .article-content h3,
        .article-content h4 {
            color: #000;
            font-weight: 300;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            line-height: 1.3;
        }

        .article-content h1 {
            font-size: 2.5rem;
        }

        .article-content h2 {
            font-size: 2rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .article-content h3 {
            font-size: 1.5rem;
        }

        .article-content p {
            margin-bottom: 1.5rem;
        }

        .article-content a {
            color: #000;
            text-decoration: underline;
            text-underline-offset: 4px;
            transition: all 0.3s;
        }

        .article-content a:hover {
            text-decoration-thickness: 2px;
        }

        .article-content ul,
        .article-content ol {
            margin: 1.5rem 0;
            padding-left: 2rem;
        }

        .article-content li {
            margin-bottom: 0.75rem;
        }

        .article-content blockquote {
            border-left: 3px solid #000;
            padding-left: 1.5rem;
            margin: 2rem 0;
            font-style: italic;
            color: #6b7280;
        }

        .article-content code {
            background: #f3f4f6;
            padding: 0.2rem 0.5rem;
            border-radius: 0;
            font-size: 0.9em;
            font-family: 'Courier New', monospace;
        }

        .article-content pre {
            background: #000;
            color: #fff;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 2rem 0;
        }

        .article-content pre code {
            background: transparent;
            padding: 0;
            color: #fff;
        }

        .article-content img {
            width: 100%;
            height: auto;
            margin: 3rem 0;
            filter: grayscale(100%);
            transition: filter 0.5s;
        }

        .article-content img:hover {
            filter: grayscale(0%);
        }

        .article-content hr {
            border: none;
            border-top: 1px solid #e5e7eb;
            margin: 3rem 0;
        }

        .article-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
        }

        .article-content th,
        .article-content td {
            padding: 0.75rem;
            border: 1px solid #e5e7eb;
            text-align: left;
        }

        .article-content th {
            background: #f9fafb;
            font-weight: 500;
        }
    </style>
{% endblock %}
